<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>IDEA ‚Äî Plateforme d'Innovation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
  
  <style>
    /* =========================================================
       DESIGN TOKENS ‚Äî Bioluminescent Neo-Glassmorphism
    ========================================================== */
    :root {
      /* Couleurs primaires - palette bioluminescente */
      --bg-deep: #030712;
      --bg-surface: #0a0f1a;
      --bg-elevated: #111827;
      
      /* Accents lumineux */
      --glow-cyan: #22d3ee;
      --glow-cyan-soft: rgba(34, 211, 238, 0.15);
      --glow-violet: #a78bfa;
      --glow-violet-soft: rgba(167, 139, 250, 0.12);
      --glow-emerald: #34d399;
      --glow-emerald-soft: rgba(52, 211, 153, 0.1);
      --glow-amber: #fbbf24;
      --glow-rose: #fb7185;
      
      /* Texte */
      --text-primary: #f8fafc;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      
      /* Glass effects */
      --glass-bg: rgba(15, 23, 42, 0.7);
      --glass-border: rgba(148, 163, 184, 0.1);
      --glass-blur: blur(24px);
      
      /* Rayons et ombres */
      --radius-sm: 12px;
      --radius-md: 20px;
      --radius-lg: 28px;
      --radius-xl: 40px;
      --radius-full: 9999px;
      
      --shadow-glow: 0 0 60px -12px var(--glow-cyan);
      --shadow-elevated: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      --shadow-card: 0 4px 24px -4px rgba(0, 0, 0, 0.3), 0 0 0 1px var(--glass-border);
    }

    /* =========================================================
       RESET & BASE
    ========================================================== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body {
      font-family: 'DM Sans', system-ui, sans-serif;
      background: var(--bg-deep);
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* =========================================================
       FOND ANIM√â ‚Äî Effet bioluminescent
    ========================================================== */
    .canvas-bg {
      position: fixed;
      inset: 0;
      z-index: -10;
      overflow: hidden;
    }

    .orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(100px);
      opacity: 0.5;
      animation: float 20s ease-in-out infinite;
    }

    .orb-1 {
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, var(--glow-cyan) 0%, transparent 70%);
      top: -200px;
      right: -100px;
      animation-delay: 0s;
    }

    .orb-2 {
      width: 500px;
      height: 500px;
      background: radial-gradient(circle, var(--glow-violet) 0%, transparent 70%);
      bottom: -150px;
      left: -100px;
      animation-delay: -7s;
    }

    .orb-3 {
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, var(--glow-emerald) 0%, transparent 70%);
      top: 40%;
      left: 30%;
      animation-delay: -14s;
      opacity: 0.3;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(30px, -30px) scale(1.05); }
      50% { transform: translate(-20px, 20px) scale(0.95); }
      75% { transform: translate(-30px, -20px) scale(1.02); }
    }

    /* Grille de points subtile */
    .grid-overlay {
      position: fixed;
      inset: 0;
      z-index: -9;
      background-image: 
        radial-gradient(circle at 1px 1px, rgba(148, 163, 184, 0.03) 1px, transparent 0);
      background-size: 40px 40px;
      pointer-events: none;
    }

    /* Lignes de flux */
    .flow-lines {
      position: fixed;
      inset: 0;
      z-index: -8;
      pointer-events: none;
      overflow: hidden;
    }

    .flow-line {
      position: absolute;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--glow-cyan-soft), transparent);
      animation: flow 8s linear infinite;
    }

    .flow-line:nth-child(1) { top: 20%; width: 60%; left: -60%; animation-delay: 0s; }
    .flow-line:nth-child(2) { top: 45%; width: 80%; left: -80%; animation-delay: -2s; opacity: 0.5; }
    .flow-line:nth-child(3) { top: 70%; width: 50%; left: -50%; animation-delay: -4s; opacity: 0.3; }

    @keyframes flow {
      0% { transform: translateX(0); }
      100% { transform: translateX(calc(100vw + 100%)); }
    }

    /* =========================================================
       LAYOUT PRINCIPAL
    ========================================================== */
    .app-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 24px 160px;
    }

    /* =========================================================
       HEADER ‚Äî Logo et badge
    ========================================================== */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 48px;
    }

    .logo-group {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo-mark {
      width: 56px;
      height: 56px;
      border-radius: var(--radius-md);
      background: linear-gradient(135deg, var(--glow-cyan), var(--glow-violet));
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-glow);
      position: relative;
      overflow: hidden;
    }

    .logo-mark::before {
      content: '';
      position: absolute;
      inset: 2px;
      background: var(--bg-deep);
      border-radius: calc(var(--radius-md) - 2px);
    }

    .logo-mark svg {
      position: relative;
      z-index: 1;
    }

    .logo-text {
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      font-size: 28px;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--text-primary) 0%, var(--glow-cyan) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .status-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-full);
      font-size: 13px;
      font-weight: 500;
      color: var(--text-secondary);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--glow-emerald);
      box-shadow: 0 0 12px var(--glow-emerald);
      animation: pulse-dot 2s ease-in-out infinite;
    }

    @keyframes pulse-dot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(0.8); }
    }

    /* =========================================================
       HERO SECTION
    ========================================================== */
    .hero {
      text-align: center;
      margin-bottom: 64px;
      position: relative;
    }

    .hero-eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: linear-gradient(135deg, var(--glow-cyan-soft), var(--glow-violet-soft));
      border: 1px solid rgba(34, 211, 238, 0.2);
      border-radius: var(--radius-full);
      font-size: 13px;
      font-weight: 600;
      color: var(--glow-cyan);
      margin-bottom: 24px;
      animation: fadeInUp 0.6s ease-out;
    }

    .hero-title {
      font-family: 'Syne', sans-serif;
      font-size: clamp(48px, 8vw, 80px);
      font-weight: 800;
      line-height: 1.05;
      letter-spacing: -0.03em;
      margin-bottom: 20px;
      animation: fadeInUp 0.6s ease-out 0.1s backwards;
    }

    .hero-title .gradient-text {
      background: linear-gradient(135deg, var(--glow-cyan) 0%, var(--glow-violet) 50%, var(--glow-rose) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: inline-block;
    }

    .hero-subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      max-width: 560px;
      margin: 0 auto 32px;
      line-height: 1.7;
      animation: fadeInUp 0.6s ease-out 0.2s backwards;
    }

    .hero-cta {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
      animation: fadeInUp 0.6s ease-out 0.3s backwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* =========================================================
       BOUTONS
    ========================================================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 16px 28px;
      border-radius: var(--radius-md);
      font-family: 'Space Grotesk', sans-serif;
      font-size: 15px;
      font-weight: 600;
      letter-spacing: -0.01em;
      cursor: pointer;
      border: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--glow-cyan), #06b6d4);
      color: var(--bg-deep);
      box-shadow: 0 4px 24px -4px rgba(34, 211, 238, 0.4);
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent, rgba(255,255,255,0.2));
      opacity: 0;
      transition: opacity 0.3s;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px -4px rgba(34, 211, 238, 0.5);
    }

    .btn-primary:hover::before {
      opacity: 1;
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      color: var(--text-primary);
      border: 1px solid var(--glass-border);
    }

    .btn-secondary:hover {
      background: rgba(30, 41, 59, 0.8);
      border-color: rgba(148, 163, 184, 0.2);
      transform: translateY(-2px);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
      padding: 12px 20px;
    }

    .btn-ghost:hover {
      color: var(--text-primary);
      background: rgba(255,255,255,0.05);
    }

    .btn-icon {
      width: 48px;
      height: 48px;
      padding: 0;
      border-radius: var(--radius-md);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    /* =========================================================
       CARTES GLASSMORPHISM
    ========================================================== */
    .card {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      -webkit-backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      position: relative;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    }

    .card-glow {
      box-shadow: var(--shadow-card), var(--shadow-glow);
    }

    .card-header {
      padding: 24px 28px;
      border-bottom: 1px solid var(--glass-border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .card-title {
      font-family: 'Syne', sans-serif;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .card-body {
      padding: 28px;
    }

    /* =========================================================
       FORMULAIRES
    ========================================================== */
    .form-group {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 10px;
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 16px 20px;
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      font-family: inherit;
      font-size: 15px;
      transition: all 0.2s ease;
    }

    .form-input::placeholder,
    .form-textarea::placeholder {
      color: var(--text-muted);
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--glow-cyan);
      box-shadow: 0 0 0 4px var(--glow-cyan-soft);
      background: rgba(15, 23, 42, 0.8);
    }

    .form-textarea {
      min-height: 140px;
      resize: vertical;
    }

    .form-select {
      appearance: none;
      cursor: pointer;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      padding-right: 48px;
    }

    /* Radio/Checkbox styl√©s */
    .choice-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .choice-item {
      position: relative;
    }

    .choice-item input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .choice-item label {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      background: rgba(15, 23, 42, 0.4);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      font-weight: 500;
    }

    .choice-item label:hover {
      background: rgba(15, 23, 42, 0.6);
      border-color: rgba(148, 163, 184, 0.2);
    }

    .choice-item input:checked + label {
      background: var(--glow-cyan-soft);
      border-color: var(--glow-cyan);
      color: var(--glow-cyan);
    }

    .choice-icon {
      width: 24px;
      height: 24px;
      border-radius: 8px;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    /* =========================================================
       MODE SELECTOR ‚Äî Choix √©crire/parler
    ========================================================== */
    .mode-selector {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 32px;
    }

    .mode-card {
      position: relative;
      padding: 32px;
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      border: 2px solid var(--glass-border);
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-align: center;
    }

    .mode-card:hover {
      border-color: rgba(148, 163, 184, 0.3);
      transform: translateY(-4px);
      box-shadow: var(--shadow-elevated);
    }

    .mode-card.active {
      border-color: var(--glow-cyan);
      background: linear-gradient(135deg, var(--glow-cyan-soft), transparent);
    }

    .mode-card.active::before {
      content: '';
      position: absolute;
      inset: -2px;
      border-radius: calc(var(--radius-lg) + 2px);
      background: linear-gradient(135deg, var(--glow-cyan), var(--glow-violet));
      z-index: -1;
      opacity: 0.5;
      filter: blur(20px);
    }

    .mode-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      border-radius: var(--radius-xl);
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.1), rgba(167, 139, 250, 0.1));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      transition: transform 0.3s ease;
    }

    .mode-card:hover .mode-icon {
      transform: scale(1.1);
    }

    .mode-title {
      font-family: 'Syne', sans-serif;
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .mode-desc {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* =========================================================
       STEPS NAVIGATION
    ========================================================== */
    .step-page {
      display: none;
      animation: fadeIn 0.4s ease-out;
    }

    .step-page.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .steps-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
    }

    .step-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--glass-border);
      transition: all 0.3s ease;
    }

    .step-dot.active {
      background: var(--glow-cyan);
      box-shadow: 0 0 12px var(--glow-cyan);
    }

    .step-dot.completed {
      background: var(--glow-emerald);
    }

    .step-connector {
      width: 40px;
      height: 2px;
      background: var(--glass-border);
    }

    /* =========================================================
       LAYOUT √Ä DEUX COLONNES
    ========================================================== */
    .split-layout {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 24px;
      align-items: start;
    }

    @media (max-width: 900px) {
      .split-layout {
        grid-template-columns: 1fr;
      }
    }

    /* =========================================================
       PREVIEW PANEL
    ========================================================== */
    .preview-panel {
      position: sticky;
      top: 24px;
    }

    .preview-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
    }

    .preview-avatar {
      width: 64px;
      height: 64px;
      border-radius: var(--radius-md);
      background: linear-gradient(135deg, var(--glow-violet-soft), var(--glow-cyan-soft));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .preview-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .preview-box {
      padding: 16px;
      background: rgba(15, 23, 42, 0.5);
      border: 1px dashed rgba(34, 211, 238, 0.3);
      border-radius: var(--radius-md);
      min-height: 100px;
    }

    .preview-box-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .preview-box-content {
      font-size: 14px;
      color: var(--text-secondary);
      white-space: pre-wrap;
    }

    /* =========================================================
       ENREGISTREMENT VOCAL
    ========================================================== */
    .voice-recorder {
      text-align: center;
      padding: 40px;
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.05), rgba(167, 139, 250, 0.05));
      border-radius: var(--radius-lg);
      border: 1px dashed var(--glow-cyan);
    }

    .voice-waveform {
      height: 60px;
      margin: 24px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .voice-bar {
      width: 4px;
      background: var(--glow-cyan);
      border-radius: 2px;
      animation: wave 1s ease-in-out infinite;
    }

    .voice-bar:nth-child(1) { height: 20px; animation-delay: 0s; }
    .voice-bar:nth-child(2) { height: 35px; animation-delay: 0.1s; }
    .voice-bar:nth-child(3) { height: 50px; animation-delay: 0.2s; }
    .voice-bar:nth-child(4) { height: 35px; animation-delay: 0.3s; }
    .voice-bar:nth-child(5) { height: 20px; animation-delay: 0.4s; }

    @keyframes wave {
      0%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(0.5); }
    }

    .voice-status {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .voice-status.recording {
      color: var(--glow-rose);
    }

    /* =========================================================
       MEDIA UPLOAD
    ========================================================== */
    .media-dropzone {
      padding: 40px;
      border: 2px dashed var(--glass-border);
      border-radius: var(--radius-lg);
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .media-dropzone:hover,
    .media-dropzone.dragover {
      border-color: var(--glow-cyan);
      background: var(--glow-cyan-soft);
    }

    .media-dropzone-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 16px;
      background: linear-gradient(135deg, var(--glow-cyan-soft), var(--glow-violet-soft));
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .media-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 16px;
    }

    .media-preview img,
    .media-preview video {
      width: 100px;
      height: 80px;
      object-fit: cover;
      border-radius: var(--radius-sm);
      border: 2px solid var(--glass-border);
    }

    /* =========================================================
       BARRE DE SOUMISSION FIXE
    ========================================================== */
    .submit-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 16px 24px;
      background: rgba(3, 7, 18, 0.9);
      backdrop-filter: var(--glass-blur);
      border-top: 1px solid var(--glass-border);
    }

    .submit-bar-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .submit-status {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .submit-status-icon {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-sm);
      background: var(--glow-cyan-soft);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* =========================================================
       PAGE DE REMERCIEMENT
    ========================================================== */
    .thanks-section {
      text-align: center;
      padding: 80px 40px;
    }

    .thanks-icon {
      width: 120px;
      height: 120px;
      margin: 0 auto 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--glow-emerald-soft), var(--glow-cyan-soft));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 56px;
      animation: celebrate 0.6s ease-out;
    }

    @keyframes celebrate {
      0% { transform: scale(0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .thanks-title {
      font-family: 'Syne', sans-serif;
      font-size: 42px;
      font-weight: 800;
      margin-bottom: 16px;
      background: linear-gradient(135deg, var(--glow-emerald), var(--glow-cyan));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .thanks-message {
      font-size: 18px;
      color: var(--text-secondary);
      max-width: 500px;
      margin: 0 auto 32px;
      line-height: 1.7;
    }

    .thanks-highlight {
      padding: 20px 28px;
      background: linear-gradient(135deg, var(--glow-cyan-soft), var(--glow-violet-soft));
      border: 1px solid rgba(34, 211, 238, 0.2);
      border-radius: var(--radius-md);
      max-width: 500px;
      margin: 0 auto 32px;
      font-size: 15px;
    }

    /* =========================================================
       FEATURES LIST
    ========================================================== */
    .features-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .features-list li {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      font-size: 14px;
      line-height: 1.6;
    }

    .feature-number {
      width: 28px;
      height: 28px;
      flex-shrink: 0;
      border-radius: var(--radius-sm);
      background: linear-gradient(135deg, var(--glow-cyan), var(--glow-violet));
      color: var(--bg-deep);
      font-weight: 700;
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* =========================================================
       NAVIGATION ROW
    ========================================================== */
    .nav-row {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--glass-border);
    }

    /* =========================================================
       SECTION BILINGUE VOCALE
    ========================================================== */
    .bilingual-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    @media (max-width: 900px) {
      .bilingual-grid {
        grid-template-columns: 1fr;
      }
    }

    .lang-column {
      padding: 24px;
      border-radius: var(--radius-lg);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
    }

    .lang-column.native {
      border-color: rgba(34, 211, 238, 0.3);
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.05), transparent);
    }

    .lang-column.french {
      border-color: rgba(167, 139, 250, 0.3);
      background: linear-gradient(135deg, rgba(167, 139, 250, 0.05), transparent);
    }

    .lang-flag {
      font-size: 24px;
      margin-bottom: 12px;
    }

    .lang-title {
      font-family: 'Syne', sans-serif;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .lang-desc {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 16px;
    }

    /* =========================================================
       RESPONSIVE
    ========================================================== */
    @media (max-width: 768px) {
      .app-container {
        padding: 24px 16px 140px;
      }

      .header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }

      .hero-title {
        font-size: 36px;
      }

      .hero-subtitle {
        font-size: 16px;
      }

      .mode-selector {
        grid-template-columns: 1fr;
      }

      .card-body {
        padding: 20px;
      }

      .preview-grid {
        grid-template-columns: 1fr;
      }

      .submit-bar-inner {
        flex-direction: column;
        text-align: center;
      }
    }

    /* =========================================================
       ANIMATIONS AU SCROLL
    ========================================================== */
    .animate-on-scroll {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .animate-on-scroll.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* =========================================================
       TOASTS / NOTIFICATIONS
    ========================================================== */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      padding: 16px 24px;
      background: var(--bg-elevated);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-elevated);
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 12px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 200;
    }

    .toast.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    .toast.success {
      border-color: var(--glow-emerald);
    }

    .toast.error {
      border-color: var(--glow-rose);
    }

    /* =========================================================
       LOADER / SPINNER
    ========================================================== */
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid var(--glass-border);
      border-top-color: var(--glow-cyan);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* =========================================================
       CUSTOM SCROLLBAR
    ========================================================== */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-deep);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--glass-border);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-muted);
    }

    /* =========================================================
       FOCUS STATES ACCESSIBILIT√â
    ========================================================== */
    *:focus-visible {
      outline: 2px solid var(--glow-cyan);
      outline-offset: 2px;
    }

    /* =========================================================
       UTILS
    ========================================================== */
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .text-gradient {
      background: linear-gradient(135deg, var(--glow-cyan), var(--glow-violet));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .glow-text {
      text-shadow: 0 0 40px var(--glow-cyan);
    }
  </style>
</head>
<body>

  <!-- Fond anim√© bioluminescent -->
  <div class="canvas-bg">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>
  <div class="grid-overlay"></div>
  <div class="flow-lines">
    <div class="flow-line"></div>
    <div class="flow-line"></div>
    <div class="flow-line"></div>
  </div>

  <div class="app-container">
    
    <!-- Header -->
    <header class="header">
      <div class="logo-group">
        <div class="logo-mark">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
            <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="url(#logoGrad)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 17l10 5 10-5" stroke="url(#logoGrad)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12l10 5 10-5" stroke="url(#logoGrad)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <defs>
              <linearGradient id="logoGrad" x1="2" y1="2" x2="22" y2="22">
                <stop stop-color="#22d3ee"/>
                <stop offset="1" stop-color="#a78bfa"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <span class="logo-text">IDEA</span>
      </div>
      <div class="status-badge">
        <span class="status-dot"></span>
        Espace Innovation Actif
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-eyebrow">
        <span>üöÄ</span>
        <span>Partage en moins de 2 minutes</span>
      </div>
      <h1 class="hero-title">
        Laisse ton id√©e<br>
        <span class="gradient-text">briller</span> ‚ú®
      </h1>
      <p class="hero-subtitle">
        Innovation, am√©lioration continue ou retour terrain ‚Äî chaque contribution 
        est analys√©e par l'√©quipe IDEA et peut transformer notre quotidien.
      </p>
    </section>

    <!-- Contenu principal avec steps -->
    <main>
      
      <!-- STEP 1 : Choix du mode -->
      <section id="step1" class="step-page active">
        <div class="card card-glow animate-on-scroll visible">
          <div class="card-header">
            <h2 class="card-title">Comment veux-tu t'exprimer ?</h2>
          </div>
          <div class="card-body">
            <p style="color: var(--text-secondary); margin-bottom: 24px;">
              Choisis le mode qui te convient le mieux. Tu pourras toujours 
              compl√©ter ou modifier ta contribution √† chaque √©tape.
            </p>
            
            <div class="mode-selector">
              <div class="mode-card" id="modeText" tabindex="0" role="button">
                <div class="mode-icon">‚úçÔ∏è</div>
                <h3 class="mode-title">Je pr√©f√®re √©crire</h3>
                <p class="mode-desc">
                  Remplis un formulaire simple avec les informations essentielles.
                </p>
              </div>
              
              <div class="mode-card" id="modeVoice" tabindex="0" role="button">
                <div class="mode-icon">üéôÔ∏è</div>
                <h3 class="mode-title">Je pr√©f√®re parler</h3>
                <p class="mode-desc">
                  Enregistre ton id√©e √† l'oral ‚Äî nous transcrivons et traduisons automatiquement.
                </p>
              </div>
            </div>

            <div style="margin-top: 40px; padding: 24px; background: rgba(15, 23, 42, 0.5); border-radius: var(--radius-lg);">
              <h4 style="font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 700; margin-bottom: 16px;">
                Ce que tu peux partager
              </h4>
              <ul class="features-list">
                <li>
                  <span class="feature-number">1</span>
                  <span>Une <strong>id√©e d'innovation</strong> produit, service ou usage client.</span>
                </li>
                <li>
                  <span class="feature-number">2</span>
                  <span>Une <strong>am√©lioration</strong> sur un process, un outil, un flux.</span>
                </li>
                <li>
                  <span class="feature-number">3</span>
                  <span>Un <strong>probl√®me terrain</strong> observ√© au quotidien.</span>
                </li>
              </ul>
            </div>

            <!-- reCAPTCHA -->
            <div id="captchaRow" style="display: none; margin-top: 32px; text-align: center;">
              <div class="g-recaptcha" style="display: inline-block;"
                   data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"
                   data-callback="onCaptchaSuccess">
              </div>
              <p style="color: var(--text-muted); font-size: 13px; margin-top: 12px;">
                Validation de s√©curit√© avant de continuer
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 2 : Profil (mode texte) -->
      <section id="step2" class="step-page">
        <div class="steps-indicator">
          <div class="step-dot active"></div>
          <div class="step-connector"></div>
          <div class="step-dot"></div>
          <div class="step-connector"></div>
          <div class="step-dot"></div>
          <div class="step-connector"></div>
          <div class="step-dot"></div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Qui es-tu ?</h2>
            <span style="color: var(--text-muted); font-size: 13px;">√âtape 1/4</span>
          </div>
          <div class="card-body">
            <p style="color: var(--text-secondary); margin-bottom: 24px;">
              Quelques informations pour mieux te conna√Ætre et pouvoir te recontacter si besoin.
            </p>

            <div class="form-group">
              <label class="form-label" for="authorName">Nom et pr√©nom</label>
              <input type="text" id="authorName" class="form-input" placeholder="Ex : Marie Dupont">
            </div>

            <div class="form-group">
              <label class="form-label" for="site">Sur quel site travailles-tu ?</label>
              <select id="site" class="form-select">
                <option value="">S√©lectionne ton site</option>
                <option>Auxerre</option>
                <option>Beaumont</option>
                <option>B√©ziers</option>
                <option>Berre-l'√âtang</option>
                <option>Boulogne-Billancourt (Si√®ge social)</option>
                <option>Chamb√©ry</option>
                <option>Colmar</option>
                <option>Corbas</option>
                <option>Nice</option>
                <option>Rennes</option>
                <option>Toulouse</option>
                <option value="Autre">Autre (pr√©ciser)</option>
              </select>
            </div>

            <div id="otherSiteRow" style="display: none;">
              <div class="form-group">
                <label class="form-label" for="otherSite">Pr√©cise ton site</label>
                <input type="text" id="otherSite" class="form-input" placeholder="Nom du site">
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="service">Dans quel service travailles-tu ?</label>
              <select id="service" class="form-select">
                <option value="">S√©lectionne ton service</option>
                <option>Production</option>
                <option>Maintenance</option>
                <option>Distribution</option>
                <option>Relation client</option>
                <option>Commerce</option>
                <option>Administratif</option>
                <option>Support (achats, finance, HSE, RH‚Ä¶)</option>
                <option value="Autre">Autre (pr√©ciser)</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label" for="function">Quelle est ta fonction ?</label>
              <input type="text" id="function" class="form-input" placeholder="Ex : Technicien de maintenance">
            </div>

            <div class="nav-row">
              <button class="btn btn-ghost" id="backToStep1">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Retour
              </button>
              <button class="btn btn-primary" id="toStep3">
                Continuer
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 3 : Coordonn√©es -->
      <section id="step3" class="step-page">
        <div class="steps-indicator">
          <div class="step-dot completed"></div>
          <div class="step-connector"></div>
          <div class="step-dot active"></div>
          <div class="step-connector"></div>
          <div class="step-dot"></div>
          <div class="step-connector"></div>
          <div class="step-dot"></div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Comment te recontacter ?</h2>
            <span style="color: var(--text-muted); font-size: 13px;">√âtape 2/4</span>
          </div>
          <div class="card-body">
            <div class="form-group">
              <label class="form-label" for="email">Adresse mail professionnelle (optionnel)</label>
              <input type="email" id="email" class="form-input" placeholder="prenom.nom@entreprise.com">
              <p style="color: var(--text-muted); font-size: 13px; margin-top: 8px;">
                Facilite le suivi de ton id√©e mais n'est pas obligatoire.
              </p>
            </div>

            <div class="form-group">
              <label class="form-label">Pr√©f√©rence de contact</label>
              <div class="choice-grid">
                <div class="choice-item">
                  <input type="radio" name="contactMode" value="email" id="contactEmail">
                  <label for="contactEmail">
                    <span class="choice-icon">üìß</span>
                    Mail professionnel
                  </label>
                </div>
                <div class="choice-item">
                  <input type="radio" name="contactMode" value="manager" id="contactManager">
                  <label for="contactManager">
                    <span class="choice-icon">üë§</span>
                    Via mon responsable
                  </label>
                </div>
              </div>
            </div>

            <div class="nav-row">
              <button class="btn btn-ghost" id="backToStep2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Retour
              </button>
              <button class="btn btn-primary" id="toStep4">
                Continuer
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 4 : Contenu de l'id√©e -->
      <section id="step4" class="step-page">
        <div class="steps-indicator">
          <div class="step-dot completed"></div>
          <div class="step-connector"></div>
          <div class="step-dot completed"></div>
          <div class="step-connector"></div>
          <div class="step-dot active"></div>
          <div class="step-connector"></div>
          <div class="step-dot"></div>
        </div>

        <div class="split-layout">
          <!-- Colonne principale -->
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Ton IDEA</h2>
              <span style="color: var(--text-muted); font-size: 13px;">√âtape 3/4</span>
            </div>
            <div class="card-body">
              
              <div class="form-group">
                <label class="form-label">Type de contribution</label>
                <div class="choice-grid">
                  <div class="choice-item">
                    <input type="checkbox" name="type" value="difficulte" id="typeDiff">
                    <label for="typeDiff">
                      <span class="choice-icon">‚ö†Ô∏è</span>
                      Difficult√©
                    </label>
                  </div>
                  <div class="choice-item">
                    <input type="checkbox" name="type" value="amelioration" id="typeAmel">
                    <label for="typeAmel">
                      <span class="choice-icon">üîß</span>
                      Am√©lioration
                    </label>
                  </div>
                  <div class="choice-item">
                    <input type="checkbox" name="type" value="innovation" id="typeInno">
                    <label for="typeInno">
                      <span class="choice-icon">üí°</span>
                      Innovation
                    </label>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label" for="ideaTitle">Titre de ton IDEA</label>
                <input type="text" id="ideaTitle" class="form-input" placeholder="Ex : Optimisation du processus de livraison">
              </div>

              <div class="form-group">
                <label class="form-label" for="ideaDesc">Description</label>
                <textarea id="ideaDesc" class="form-textarea" placeholder="D√©cris ton id√©e, le contexte, le besoin, l'impact attendu..."></textarea>
              </div>

              <div class="form-group">
                <label class="form-label" for="impact">Impact principal</label>
                <select id="impact" class="form-select">
                  <option value="">S√©lectionne l'impact</option>
                  <option>Condition de travail / Ergonomie</option>
                  <option>D√©veloppement durable / Environnement</option>
                  <option>Gain de temps / Efficacit√©</option>
                  <option>Productivit√©</option>
                  <option>√âconomie d'√©nergie</option>
                  <option>S√©curit√©</option>
                  <option value="Autre">Autre</option>
                </select>
              </div>

              <!-- Enregistrement vocal -->
              <div class="form-group">
                <label class="form-label">Ou enregistre ton id√©e</label>
                <div class="voice-recorder" id="voiceRecorder">
                  <div class="voice-waveform" id="waveform" style="display: none;">
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                  </div>
                  <p style="font-size: 36px; margin-bottom: 16px;">üéôÔ∏è</p>
                  <p class="voice-status" id="voiceStatus">Clique pour commencer l'enregistrement</p>
                  <div style="display: flex; gap: 12px; justify-content: center; margin-top: 20px;">
                    <button class="btn btn-primary" id="recBtn">
                      Enregistrer
                    </button>
                    <button class="btn btn-secondary" id="uploadBtn">
                      üìÅ Importer
                    </button>
                  </div>
                  <audio id="audioPlayer" controls style="display: none; margin-top: 16px; width: 100%;"></audio>
                  <input type="file" id="audioFile" accept="audio/*" style="display: none;">
                </div>
              </div>

              <!-- Upload m√©dias -->
              <div class="form-group">
                <label class="form-label">Illustrations (optionnel)</label>
                <div class="media-dropzone" id="mediaDropzone">
                  <div class="media-dropzone-icon">üì∑</div>
                  <p style="font-weight: 600; margin-bottom: 8px;">D√©pose tes fichiers ici</p>
                  <p style="color: var(--text-muted); font-size: 13px;">ou clique pour parcourir</p>
                </div>
                <input type="file" id="mediaInput" accept="image/*,video/*" multiple style="display: none;">
                <div class="media-preview" id="mediaPreview"></div>
              </div>

              <div class="nav-row">
                <button class="btn btn-ghost" id="backToStep3">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                  </svg>
                  Retour
                </button>
              </div>
            </div>
          </div>

          <!-- Preview panel -->
          <div class="preview-panel">
            <div class="card">
              <div class="card-body">
                <div class="preview-header">
                  <div class="preview-avatar">ü§ñ</div>
                  <div>
                    <h3 style="font-family: 'Syne', sans-serif; font-size: 18px; font-weight: 700;">
                      Aper√ßu & traduction
                    </h3>
                    <p style="color: var(--text-muted); font-size: 13px;">
                      V√©rifie ce qui a √©t√© compris
                    </p>
                  </div>
                </div>

                <div class="preview-grid">
                  <div class="preview-box">
                    <div class="preview-box-label">
                      <span>üó£Ô∏è</span> Texte d'origine
                    </div>
                    <div class="preview-box-content" id="origText">‚Äî</div>
                  </div>
                  <div class="preview-box">
                    <div class="preview-box-label">
                      <span>üá´üá∑</span> Traduction FR
                    </div>
                    <div class="preview-box-content" id="frText">‚Äî</div>
                  </div>
                </div>

                <div style="margin-top: 20px; padding: 16px; background: rgba(34, 211, 238, 0.05); border-radius: var(--radius-md); border: 1px solid rgba(34, 211, 238, 0.1);">
                  <p style="font-size: 13px; color: var(--text-secondary); display: flex; gap: 8px; align-items: flex-start;">
                    <span style="color: var(--glow-cyan);">üí°</span>
                    Tu peux corriger le texte ou refaire un enregistrement si besoin.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP Voice : Profil vocal avec d√©tection de langue -->
      <section id="stepVoice" class="step-page">
        <div class="card card-glow">
          <div class="card-body" style="padding: 40px;">
            
            <!-- √âtape d√©tection langue -->
            <div id="langDetection">
              <div style="text-align: center; margin-bottom: 32px;">
                <div style="font-size: 64px; margin-bottom: 16px;">üåç</div>
                <h2 style="font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 800; margin-bottom: 12px;">
                  Dans quelle langue veux-tu parler ?
                </h2>
                <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto;">
                  Dis une phrase comme ¬´ Je pr√©f√®re parler en espagnol ¬ª ou s√©lectionne ta langue ci-dessous.
                </p>
              </div>

              <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; margin-bottom: 32px;">
                <button class="btn btn-primary" id="langRecBtn">
                  üéôÔ∏è Dire ma langue
                </button>
                <select class="form-select" id="langSelect" style="max-width: 280px;">
                  <option value="">Ou choisis ta langue‚Ä¶</option>
                  <option value="fr">Fran√ßais</option>
                  <option value="en">English</option>
                  <option value="es">Espa√±ol</option>
                  <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                  <option value="pt">Portugu√™s</option>
                  <option value="de">Deutsch</option>
                  <option value="it">Italiano</option>
                  <option value="zh">‰∏≠Êñá</option>
                </select>
              </div>

              <div style="max-width: 500px; margin: 0 auto;">
                <div class="preview-box">
                  <div class="preview-box-label">Texte reconnu</div>
                  <div class="preview-box-content" id="langText">‚Äî</div>
                </div>
              </div>

              <div id="langConfirm" style="display: none; text-align: center; margin-top: 24px;">
                <p style="color: var(--text-secondary); margin-bottom: 16px;" id="langConfirmText"></p>
                <div style="display: flex; gap: 12px; justify-content: center;">
                  <button class="btn btn-ghost" id="langNo" style="background: rgba(251, 113, 133, 0.1); border-color: var(--glow-rose);">
                    ‚úñ Non
                  </button>
                  <button class="btn btn-primary" id="langYes" style="background: linear-gradient(135deg, var(--glow-emerald), #10b981);">
                    ‚úî Oui
                  </button>
                </div>
              </div>
            </div>

            <!-- √âtape profil bilingue -->
            <div id="profileBilingual" style="display: none;">
              <div style="text-align: center; margin-bottom: 32px;">
                <h2 style="font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 800; margin-bottom: 12px;">
                  Pr√©sente-toi √† l'oral
                </h2>
              </div>

              <div class="bilingual-grid">
                <div class="lang-column native">
                  <div class="lang-flag" id="nativeFlag">üåê</div>
                  <h3 class="lang-title" id="nativeTitle">Dans ta langue</h3>
                  <p class="lang-desc" id="nativeDesc">
                    Indique simplement :
                  </p>
                  <ul class="features-list" id="nativeList">
                    <li><span class="feature-number">1</span><span>Ton nom et pr√©nom</span></li>
                    <li><span class="feature-number">2</span><span>Ton site de travail</span></li>
                    <li><span class="feature-number">3</span><span>Ton service</span></li>
                    <li><span class="feature-number">4</span><span>Ta fonction</span></li>
                  </ul>
                  <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button class="btn btn-primary" id="profileRecBtn">üéôÔ∏è Enregistrer</button>
                    <button class="btn btn-secondary" id="profileUploadBtn">üìÅ Importer</button>
                  </div>
                </div>

                <div class="lang-column french">
                  <div class="lang-flag">üá´üá∑</div>
                  <h3 class="lang-title">En fran√ßais</h3>
                  <p class="lang-desc">Indique simplement :</p>
                  <ul class="features-list">
                    <li><span class="feature-number">1</span><span>Ton <strong>nom et pr√©nom</strong></span></li>
                    <li><span class="feature-number">2</span><span>Ton <strong>site</strong> de travail</span></li>
                    <li><span class="feature-number">3</span><span>Ton <strong>service</strong></span></li>
                    <li><span class="feature-number">4</span><span>Ta <strong>fonction</strong></span></li>
                  </ul>
                  <p style="color: var(--text-muted); font-size: 12px; margin-top: 20px;">
                    üîí Ton audio est utilis√© uniquement pour g√©n√©rer le texte.
                  </p>
                </div>
              </div>

              <input type="file" id="profileAudioFile" accept="audio/*" style="display: none;">
              <audio id="profilePlayer" controls style="display: none; margin-top: 24px; width: 100%;"></audio>

              <div class="preview-grid" style="margin-top: 32px;">
                <div class="preview-box">
                  <div class="preview-box-label">üó£Ô∏è Texte d'origine</div>
                  <div class="preview-box-content" id="profileOrigText">‚Äî</div>
                </div>
                <div class="preview-box">
                  <div class="preview-box-label">üá´üá∑ Traduction FR</div>
                  <div class="preview-box-content" id="profileFrText">‚Äî</div>
                </div>
              </div>

              <div id="profileMissing" style="display: none; margin-top: 20px; padding: 16px; background: rgba(251, 113, 133, 0.1); border: 1px solid var(--glow-rose); border-radius: var(--radius-md);">
                <p style="color: var(--glow-rose); font-size: 14px; font-weight: 600;"></p>
              </div>

              <div class="nav-row">
                <button class="btn btn-ghost" id="backToLang">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                  </svg>
                  Changer de langue
                </button>
                <button class="btn btn-primary" id="toStep2FromVoice">
                  V√©rifier mes infos
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </button>
              </div>
            </div>

          </div>
        </div>
      </section>

      <!-- PAGE MERCI -->
      <section id="stepThanks" class="step-page">
        <div class="card">
          <div class="thanks-section">
            <div class="thanks-icon">üéâ</div>
            <h2 class="thanks-title">Merci pour ton IDEA !</h2>
            <p class="thanks-message">
              L'√©quipe IDEA te remercie chaleureusement. Ta contribution va √™tre 
              analys√©e et pourrait bien transformer notre quotidien.
            </p>
            <div class="thanks-highlight">
              ‚ú® Sans id√©es, il n'y a pas de progr√®s. Merci d'avoir pris le temps de partager la tienne.
            </div>
            <button class="btn btn-secondary" id="backHome">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
              </svg>
              Retour √† l'accueil
            </button>
          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Barre de soumission fixe -->
  <div class="submit-bar" id="submitBar" style="display: none;">
    <div class="submit-bar-inner">
      <div class="submit-status">
        <div class="submit-status-icon">üí°</div>
        <span id="submitStatus">Pr√™t √† envoyer ton IDEA</span>
      </div>
      <button class="btn btn-primary" id="submitBtn" disabled>
        ‚úÖ Soumettre mon id√©e
      </button>
    </div>
  </div>

  <!-- Toast notifications -->
  <div class="toast" id="toast">
    <span id="toastIcon">‚úì</span>
    <span id="toastText">Message</span>
  </div>

  <script>
    /* =========================================================
       GLOBAL STATE (pont Front ‚Üî Back)
    ========================================================= */
    const appState = {
      media_paths: [],
      audio_path: null,
      detected_language: null,
      original_text: null,
      french_translation: null
    };
    
    /* =========================================================
       NAVIGATION & STEPS
    ========================================================= */
    const steps = document.querySelectorAll('.step-page');
    let currentStep = 'step1';
    let chosenMode = null;
    
    function showStep(stepId) {
      steps.forEach(s => s.classList.remove('active'));
      document.getElementById(stepId)?.classList.add('active');
      currentStep = stepId;
      window.scrollTo({ top: 0, behavior: 'smooth' });
    
      const submitBar = document.getElementById('submitBar');
      if (stepId === 'step4') submitBar.style.display = 'block';
      else submitBar.style.display = 'none';
    }
    
    /* =========================================================
       MODE SELECTION + CAPTCHA
    ========================================================= */
    const modeText = document.getElementById('modeText');
    const modeVoice = document.getElementById('modeVoice');
    const captchaRow = document.getElementById('captchaRow');
    
    function selectMode(mode) {
      chosenMode = mode;
      modeText.classList.toggle('active', mode === 'text');
      modeVoice.classList.toggle('active', mode === 'voice');
      captchaRow.style.display = 'block';
    }
    
    modeText?.addEventListener('click', () => selectMode('text'));
    modeVoice?.addEventListener('click', () => selectMode('voice'));
    
    window.onCaptchaSuccess = () => {
      if (chosenMode === 'text') showStep('step2');
      if (chosenMode === 'voice') showStep('stepVoice');
    };
    
    /* =========================================================
       NAV BUTTONS
    ========================================================= */
    document.getElementById('backToStep1')?.addEventListener('click', () => showStep('step1'));
    document.getElementById('toStep3')?.addEventListener('click', () => showStep('step3'));
    document.getElementById('backToStep2')?.addEventListener('click', () => showStep('step2'));
    document.getElementById('toStep4')?.addEventListener('click', () => showStep('step4'));
    document.getElementById('backToStep3')?.addEventListener('click', () => showStep('step3'));
    document.getElementById('backHome')?.addEventListener('click', () => showStep('step1'));
    
    /* =========================================================
       SITE "AUTRE"
    ========================================================= */
    const siteSelect = document.getElementById('site');
    const otherSiteRow = document.getElementById('otherSiteRow');
    
    siteSelect?.addEventListener('change', () => {
      otherSiteRow.style.display = siteSelect.value === 'Autre' ? 'block' : 'none';
    });
    
    /* =========================================================
       MEDIA UPLOAD ‚Üí /api/upload_media
    ========================================================= */
    const mediaInput = document.getElementById('mediaInput');
    const mediaDropzone = document.getElementById('mediaDropzone');
    const mediaPreview = document.getElementById('mediaPreview');
    
    mediaDropzone?.addEventListener('click', () => mediaInput.click());
    mediaInput?.addEventListener('change', () => uploadMedia(mediaInput.files));
    
    async function uploadMedia(files) {
      const fd = new FormData();
      [...files].forEach(f => fd.append("media", f));
    
      const res = await fetch("/api/upload_media", { method: "POST", body: fd });
      const data = await res.json();
    
      if (!data.ok) return showToast("Erreur upload m√©dias", "error");
    
      appState.media_paths = data.paths;
      mediaPreview.innerHTML = '';
    
      [...files].forEach(file => {
        const el = document.createElement(file.type.startsWith('video') ? 'video' : 'img');
        el.src = URL.createObjectURL(file);
        if (el.tagName === 'VIDEO') el.controls = true;
        mediaPreview.appendChild(el);
      });
    }
    
    /* =========================================================
       AUDIO ‚Üí /api/transcribe
    ========================================================= */
    const uploadBtn = document.getElementById('uploadBtn');
    const audioFile = document.getElementById('audioFile');
    const voiceStatus = document.getElementById('voiceStatus');
    
    uploadBtn?.addEventListener('click', () => audioFile.click());
    
    audioFile?.addEventListener('change', async () => {
      const file = audioFile.files[0];
      if (!file) return;
    
      voiceStatus.textContent = "Transcription en cours‚Ä¶";
    
      const fd = new FormData();
      fd.append("audio", file);
    
      const res = await fetch("/api/transcribe", { method: "POST", body: fd });
      const data = await res.json();
    
      if (!data.ok) return showToast("Erreur transcription", "error");
    
      appState.audio_path = data.audio_path;
      appState.detected_language = data.language;
      appState.original_text = data.original_text;
      appState.french_translation = data.french_translation;
    
      document.getElementById('origText').textContent = data.original_text || "‚Äî";
      document.getElementById('frText').textContent = data.french_translation || "‚Äî";
    
      document.getElementById('submitBtn').disabled = false;
    });
    
    /* =========================================================
       SUBMIT FINAL ‚Üí /api/submit
    ========================================================= */
    document.getElementById('submitBtn')?.addEventListener('click', async () => {
      document.getElementById('submitStatus').innerHTML = '<div class="spinner"></div> Envoi en cours‚Ä¶';
    
      const payload = {
        author_name: document.getElementById("authorName").value,
        site: document.getElementById("site").value,
        service: document.getElementById("service").value,
        function_title: document.getElementById("function").value,
        professional_email: document.getElementById("email").value,
        contact_mode: document.querySelector('input[name="contactMode"]:checked')?.value,
    
        typed_text: document.getElementById("ideaDesc").value,
        audio_path: appState.audio_path,
        detected_language: appState.detected_language,
        original_text: appState.original_text,
        french_translation: appState.french_translation,
    
        idea_title: document.getElementById("ideaTitle").value,
        share_types: [...document.querySelectorAll('input[name="type"]:checked')].map(i => i.value),
        impact_main: document.getElementById("impact").value,
        media_paths: appState.media_paths,
        source: "web_form"
      };
    
      const res = await fetch("/api/submit", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
    
      const data = await res.json();
      if (!data.ok) return showToast("Erreur envoi IDEA", "error");
    
      document.getElementById('submitBar').style.display = 'none';
      showStep('stepThanks');
    });
    
    /* =========================================================
       TOAST
    ========================================================= */
    function showToast(message, type = "success") {
      const toast = document.getElementById("toast");
      document.getElementById("toastText").textContent = message;
      document.getElementById("toastIcon").textContent = type === "success" ? "‚úì" : "‚úó";
      toast.className = `toast ${type} show`;
      setTimeout(() => toast.classList.remove("show"), 3000);
    }
    
    /* =========================================================
       INIT
    ========================================================= */
    showStep('step1');
    </script>
    
</body>
</html>